(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e(require("vue"),require("intact/dist")):typeof define==="function"&&define.amd?define(["vue","intact/dist"],e):t.Intact=e(t.Vue,t.Intact)})(this,function(t,e){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;e=e&&e.hasOwnProperty("default")?e["default"]:e;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var n=function(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}};var i=function(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e};var o=function(t,e){var r={};for(var n in t){if(e.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(t,n))continue;r[n]=t[n]}return r};var a=function(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t};var s=e.Vdt.miss;var u=s.h;var f=s.hooks;var l=t.prototype.__patch__;var p=e.utils;var c=p.get;var d=p.set;var v=p.extend;var h=p.isArray;var y=p.create;var _=t.prototype._v("");var m=_.constructor;if(f){f.beforeInsert=function(t){var e=t.dom;var r=t.parentVNode;var n=void 0;var i=void 0;while(r){if((n=r.tag)&&n.cid==="IntactVue"&&(n=r.children.$options)){if((n=i=n.parent)&&(n=n.$options)&&(n=n._scopeId)){e.setAttribute(n,"")}if(i){r=i.$parent;while(r){if((n=r.$options)&&(n=n._scopeId)){e.setAttribute(n,"")}r=r.$parent}}break}else{r=r.parentVNode}}}}function g(t){if(h(t)){var e=[];t.forEach(function(t){if(h(t)){e.push.apply(e,g(t))}else{e.push(b(t))}});return e}return b(t)}function b(t){if(t==null)return t;var e=typeof t==="undefined"?"undefined":r(t);if(e==="string"||e==="number")return t;if(t.type)return t;if(j(t)){var n=t.componentOptions;return u(n.Ctor,$(t),null,null,t.key,t.ref)}if(t.text!==undefined){return t.text}return u(O,{vueVNode:t},null,I(t))}function $(t){var e=t.componentOptions;var r=t.data;var n=r.attrs;var i=e.Ctor.propTypes;var o={};if(n){for(var a in n){if(~["staticClass","class","style","staticStyle"].indexOf(a))continue;var s=n[a];var u=void 0;if(i&&((u=i[a])===Boolean||u&&(h(u)&&u.indexOf(Boolean)>-1||u.type===Boolean||h(u.type)&&u.type.indexOf(Boolean)>-1))&&(s===""||s===a)){s=true}o[a]=s}}var f=I(t);if(f!==undefined){o.className=f}var l=T(t);if(l!==undefined){o.style=l}if(t.key){o.key=t.key}else if(r.key){o.key=r.key}var p=r.scopedSlots;if(p){var c=o._blocks?o._blocks:o._blocks={};var d=function t(e){c[e]=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}return g(p[e].apply(this,n))}};for(var y in p){d(y)}}var _=r.model;if(_){o.value=_.value;o["v-model"]=_.expression}if(r.directives){var m=r.directives;for(var b=0;b<m.length;b++){var $=m[b];if($.name==="model"){o.value=$.value;o["v-model"]=$.expression;break}else if($.name==="show"&&!$.value){if(o.style){o.style.display="none"}else{o.style={display:"none"}}}}}V(t,o);var k=e.listeners;if(k){var O=function t(e){var r=k[e];var n=r;if(e==="input"){e="$change:value";n=function t(e,n){return r(n)}}else if(e.substr(0,7)==="update:"){e="$change:"+e.substr(7);n=function t(e,n){return r(n)}}var i="ev-"+e;if(o[i]){o[i]=[o[i],n]}else{o[i]=n}C=e};for(var C in k){O(C)}}var w=t.slots||E(e.children);var Q=N(w),S=Q.children,A=Q._blocks;o.children=S;if(o._blocks){v(o._blocks,A)}else{o._blocks=A}x(t,o);return o}function x(t,e){var r=t.context.$data;e._context={data:{get:function t(e){if(e!=null){return c(r,e)}else{return r}},set:function t(e,n){d(r,e,n)}}}}function N(t){var e=t.default,r=o(t,["default"]);var n=void 0;if(r){n={};var i=function t(e){n[e]=function(){return g(r[e])}};for(var a in r){i(a)}}return{children:g(e),_blocks:n}}function k(t){function e(e){return t(e)}e.options={functional:true,render:function e(r,n){var i=$({componentOptions:{Ctor:t,listeners:n.listeners},data:n.data,slots:n.slots(),context:{$data:n.parent.$data}});var o=t(i,true);if(h(o)){throw new Error("Array children does not be supported.")}var a={};var s={attrs:a};for(var u in o.props){if(~["children","_context","className","style","ref","key"].indexOf(u))continue;a[u]=o.props[u]}if(n.data.ref){s.ref=n.data.ref}if(o.props.className){s.staticClass=o.props.className}if(o.props.style){s.staticStyle=o.props.style}s.key=o.props.key;return r(o.tag,s,o.props.children)}};e.cid="IntactFunctionalComponent";return e}var O=function(){function t(){n(this,t)}t.prototype.init=function t(e,r){this.destroyed=true;this._addProps(r);return l(null,r.props.vueVNode,false,false,this.parentDom)};t.prototype.update=function t(e,r){this._addProps(r);return l(e.props.vueVNode,r.props.vueVNode,false,false,this.parentDom)};t.prototype.destroy=function t(e){l(e.props.vueVNode,null)};t.prototype._addProps=function t(e){this.vdt={vNode:e};var r=e.props;var n=r.vueVNode;for(var i in r){if(i==="vueVNode")continue;if(!n.data)n.data={};var o=n.data;var a=r[i];if(i.substr(0,3)==="ev-"){if(!o.on)o.on={};o.on[i.substr(3)]=a}else{if(!o.attrs)o.attrs={};o.attrs[i]=a}}if(n.elm){r.vueVNode=B(n)}};return t}();function V(t,e){var r=t.data.ref;if(r){var n=t.context.$refs;var i=void 0;e.ref=function(e){if(!n)return;if(e){i=e;if(t.data.refInFor){if(!h(n[r])){n[r]=[i]}else if(n[r].indexOf(i)<0){n[r].push(i)}}else{n[r]=i}}else{if(h(n[r])){var o=n[r].indexOf(i);if(~o){n[r].splice(o,1)}}else{n[r]=i=undefined}}}}}function I(t){var e=void 0;var r=t.data;if(r){if(r.staticClass){e=r.staticClass}if(r.class){if(!e){e=C(r.class)}else{e+=" "+C(r.class)}}}return e}function C(t){if(t==null)return"";if(h(t)){return w(t)}if((typeof t==="undefined"?"undefined":r(t))==="object"){return Q(t)}if(typeof t==="string"){return t}return""}function w(t){var e="";var r=void 0;for(var n=0;n<t.length;n++){if((r=C(t[n]))!=null&&r!==""){if(e)e+=" ";e+=r}}return e}function Q(t){var e="";for(var r in t){if(t[r]){if(e)e+=" ";e+=r}}return e}function T(t){var e=void 0;var r=t.data;if(r){e=S(r.style);if(r.staticStyle){return v(r.staticStyle,e)}}return e}function S(t){if(!t)return t;if(h(t)){return A(t)}if(typeof t==="string"){return P(t)}return t}function A(t){var e={};for(var r=0;r<t.length;r++){if(t[r]){v(e,t[r])}}return e}var M=y(null);function P(t){var e=M[t];if(e)return e;var r={};var n=/;(?![^(]*\))/g;var i=/:(.+)/;t.split(n).forEach(function(t){if(t){var e=t.split(i);e.length>1&&(r[e[0].trim()]=e[1].trim())}});M[t]=r;return r}function j(t){var e=t.data;return e&&(e=e.hook)&&(e=e.init)&&t.componentOptions.Ctor.cid==="IntactVue"}function E(t){var e={};if(!t){return e}for(var r=0,n=t.length;r<n;r++){var i=t[r];var o=i.data;if(o&&o.attrs&&o.attrs.slot){delete o.attrs.slot}if(o&&o.slot!=null){var a=o.slot;var s=e[a]||(e[a]=[]);if(i.tag==="template"){s.push.apply(s,i.children||[])}else{s.push(i)}}else{(e.default||(e.default=[])).push(i)}}for(var u in e){if(e[u].every(F)){delete e[u]}}return e}function F(t){return t.isComment&&!t.asyncFactory||t.text===" "}function B(t){var e=new m(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);e.ns=t.ns;e.isStatic=t.isStatic;e.key=t.key;e.isComment=t.isComment;e.fnContext=t.fnContext;e.fnOptions=t.fnOptions;e.fnScopeId=t.fnScopeId;e.asyncMeta=t.asyncMeta;e.isCloned=true;return e}var q=t.prototype;var D=q.init;var z=q.$nextTick;var R=q._updateFromParent;var U=e.utils.extend;var W=void 0;var G=void 0;var H=function(t){i(e,t);function e(r){n(this,e);var i=r&&r._parentVnode;if(i){var o=b(i);var s=a(this,t.call(this,o.props));r.mounted=[W?function(){s.$nextTick(s.mount)}:s.mount];r._renderChildren=true;s.$options=r;s.$vnode=i;s._isVue=true;s.vNode=o;o.children=s}else{var s=a(this,t.call(this,r))}return a(s)}e.prototype.init=function e(r,n){var i=this;var e=function e(){i.__pushActiveInstance();var o=t.prototype.init.call(i,r,n);i.__popActiveInstance();return o};if(!this._isVue)return e();G=this.mountedQueue;var o=e();return o};e.prototype.update=function e(r,n,i){var o=this;var e=function e(){o.__pushActiveInstance();var a=t.prototype.update.call(o,r,n,i);o.__popActiveInstance();return a};if(!this._isVue)return e();var a=this._shouldTrigger;this.__initMountedQueue();var s=e();this.__triggerMountedQueue();this._shouldTrigger=a;return s};e.prototype.$mount=function t(e,r){var n=this._shouldTrigger;this.__initMountedQueue();this.parentVNode=this.vNode.parentVNode=W&&W.vNode;this.inited=true;this.$el=this.init(null,this.vNode);this.vNode.dom=this.$el;this._vnode={};var i=this.$options;var o=i._refElm;var a=i._parentElm;if(a){if(o){a.insertBefore(this.$el,o)}else{a.appendChild(this.$el)}}this.__triggerMountedQueue();this._shouldTrigger=n};e.prototype.$forceUpdate=function t(){var e=this._shouldTrigger;this.__initMountedQueue();var r=b(this.$vnode);var n=this.vNode;r.children=this;this.vNode=r;this.parentVNode=this.vNode.parentVNode=W&&W.vNode;this.$vnode.elm=this.update(n,r);this.$options._renderChildren=true;var i=n.ref;var o=r.ref;if(i!==o){if(i){i(null)}if(o){o(this)}}this.__triggerMountedQueue();this._shouldTrigger=e};e.prototype.$destroy=function t(){this.destroy()};e.prototype.__initMountedQueue=function t(){this._shouldTrigger=false;if(!G||G.done){this._shouldTrigger=true;if(!this.mountedQueue||this.mountedQueue.done){this._initMountedQueue()}G=this.mountedQueue}else{this.mountedQueue=G}};e.prototype.__triggerMountedQueue=function t(){var e=this;if(this._shouldTrigger){if(this.mounted){this._triggerMountedQueue()}else{this.$options.mounted.push(function(){e._triggerMountedQueue()})}G=null;this._shouldTrigger=false}};e.prototype.__pushActiveInstance=function t(){this._prevActiveInstance=W;W=this};e.prototype.__popActiveInstance=function t(){W=this._prevActiveInstance;this._prevActiveInstance=null};e.prototype.$on=function t(){};e.prototype.$off=function t(){};return e}(e);H.cid="IntactVue";H.options=U({},t.options);H.functionalWrapper=k;H.normalize=g;H.prototype.$nextTick=z;H.prototype._updateFromParent=R;if(!Object.setPrototypeOf){U(H,e);if(!H.template){H.template=e.template}}return H});